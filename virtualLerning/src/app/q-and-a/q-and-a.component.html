<div class="item">
  <form [formGroup]="chapForm">
    <div class="chapName">Select Chapter Name</div>
    <div class="input /">
      <div>
        <div *ngIf="!hide">
          <!-- <input
            class="titleInput"
            type="list"
            list="browsers"
            formControlName="chaptername"
          /> -->
          <select
            id="browsers"
            (change)="getChapterId($event)"
            formControlName="chaptername"
          >
            <option *ngFor="let chap of AddedChapter" [value]="chap.chapterName">
              {{ chap.chapterName }}
            </option>
          </select>
        </div>
        <div *ngIf="hide">
          <select
            id="browsers"
            (change)="getAllQuestions($event)"
            formControlName="chaptername"
          >
            <option *ngFor="let chap of chapter" [value]="chap.chapterName">
              {{ chap.chapterName }}
            </option>
          </select>
        </div>
      </div>
    </div>
    <div
      *ngIf="chapForm.get('chaptername')?.errors?.['required'] && chapForm.get('chaptername')?.touched"
      class="require"
    >
      Please select the chapter name
    </div>

    <div class="chapName">CourseId</div>
    <div>
      <input class="titleInput" placeholder="" formControlName="courseId" />
    </div>
    <div
      *ngIf="chapForm.get('courseId')?.errors?.['required'] && chapForm.get('courseId')?.touched"
      class="require"
    >
      This is required field*
    </div>

    <div class="chapName">Duration</div>
    <div>
      <input
        class="titleInput"
        placeholder="hh:mm:ss"
        formControlName="duration"
      />
    </div>
    <div
      *ngIf="chapForm.get('duration')?.errors?.['required'] && chapForm.get('duration')?.touched"
      class="require"
    >
      This is required field*
    </div>

    <div class="chapName">Test&nbsp;Name</div>
    <div>
      <input class="titleInput" formControlName="moduleTest" />
    </div>
    <div
      *ngIf="chapForm.get('moduleTest')?.errors?.['required'] && chapForm.get('moduleTest')?.touched"
      class="require"
    >
      This is required field*
    </div>
    <div class="chapName">Passing&nbsp;grade</div>
    <div>
      <input class="titleInput" formControlName="passingGrade" />
    </div>
    <div
      *ngIf="chapForm.get('passingGrade')?.errors?.['required'] && chapForm.get('passingGrade')?.touched"
      class="require"
    >
      This is required field*
    </div>
    <div class="currPage">5 of 10</div>
  </form>
</div>
<!-- <div class="question" *ngFor="let qn of questionList;let i=index"> -->
<div *ngIf="!hide">
  <div
    class="question"
    [formGroup]="questionForm"
    *ngFor="let optionForm of question.controls; let i = index"
  >
    <ng-container formArrayName="questionText">
      <div [formGroupName]="i">
        <!-- <div class="Qnum">Question {{i+1}}</div> -->
        <div class="Qnum">Question {{ i + 1 }}</div>
        
        <div class="qnId">
          <label >Question Id:</label>
          <input class="in" formControlName="questionId" />
        </div>
        <div
        *ngIf="optionForm.get('questionId')?.errors?.['required'] && optionForm.get('questionId')?.touched"
            class="require"
          >
            Please enter the questionId
          </div>
        <div class="details">
          <div class="qn">
            <!-- {{qn?.questionText}}  -->
            <input
              placeholder="Enter the question"
              formControlName="question"
            />
            <div
              *ngIf="optionForm.get('question')?.errors?.['required'] && optionForm.get('question')?.touched"
              class="require"
            >
              Please enter the question
            </div>
            <!-- What is load balancing, and why is it important to system design? -->
          </div>
          <div class="deleteChoice">
            <div style="margin-right: 2vw">
              <mat-icon (click)="deleteOption(i)">delete</mat-icon>
            </div>
            <div class="more" (click)="show(i)">
              <mat-icon *ngIf="!shows[i]">add</mat-icon>
              <mat-icon *ngIf="shows[i]"> remove</mat-icon>
            </div>
          </div>
        </div>

        <div class="options" *ngIf="shows[i]">
          <!-- <div class="opt" *ngFor="let option of questionList[i]?.options"> -->
          <div class="opt">
            <!-- <div>{{option.text}}</div> -->
            <input placeholder="a" formControlName="option_1" />
            <!-- <div class="transform">
              <mat-slide-toggle color="primary"></mat-slide-toggle>
            </div> -->
          </div>
          <div class="opt">
            <input placeholder="b" formControlName="option_2" />
            
          </div>
          <div class="opt">
            <input placeholder="c" formControlName="option_3" />
            
          </div>
          <div class="opt">
            <input placeholder="d" formControlName="option_4" />
            
          </div>
          <div class="opt">
            <input
              placeholder="choose correct answer"
              formControlName="correctAnswer"
            />
          </div>
        </div>
        <div
        *ngIf="optionForm.get('correctAnswer')?.errors?.['required'] && optionForm.get('correctAnswer')?.touched"
        class="require"
      >
        Please select the correct answer
      </div>
      <div>
        <label>DeleteStatus:</label>
        <input class="in"  formControlName="deleteStatus"/>
      </div>
      <div
      *ngIf="optionForm.get('deleteStatus')?.errors?.['required'] && optionForm.get('deleteStatus')?.touched"
      class="require"
    >
      Please enter the delete status
    </div>
      </div>
    </ng-container>
    <div>
      <button class="sub" (click)="add()" [disabled]="!optionForm.valid">
        Add+
      </button>
    </div>
  </div>
  <div class="update">
    <button class="newButton" (click)="postQuestion()">Post</button>
  </div>
</div>



<!--Edit Part for upload failed thing-->

<div *ngIf="hide">
  <div class="question" *ngFor="let qn of questionlist; index as i">
    <div>
      <div class="Qnum">Question {{ i + 1 }}</div>
      <div class="chapName">
        Question Id:
        <input class="in" name="questionId{{i}}" [(ngModel)]="qn.questionId" />
      </div>

      <div class="details">
        <div class="qn">
          <!-- {{qn.questionName}} -->
          <input
            placeholder="Enter the question"
            name="question"
            [(ngModel)]="qn.questionName"
          />
        </div>
        <div class="deleteChoice">
          <div style="margin-right: 2vw">
            <mat-icon (click)="deleteQuestion(i)">delete</mat-icon>
          </div>

          <div class="more" (click)="show(i)">
            <mat-icon *ngIf="!shows[i]">add</mat-icon>
            <mat-icon *ngIf="shows[i]"> remove</mat-icon>
          </div>
        </div>
      </div>

      <div class="options" *ngIf="shows[i]">
        <div class="opt">
          <input placeholder="a" name="option_1{{i}}" [(ngModel)]="qn.option_1" />
          <!-- {{qn.option_1}} -->
        </div>
        <div class="opt">
          <input placeholder="b" name="option_2{{i}}" [(ngModel)]="qn.option_2" />
          <!-- {{qn.option_2}} -->
        </div>
        <div class="opt">
          <input placeholder="c" name="option_3{{i}}" [(ngModel)]="qn.option_3" />
          <!-- {{qn.option_3}} -->
        </div>
        <div class="opt">
          <input placeholder="d" name="option_4{{i}}" [(ngModel)]="qn.option_4" />
          <!-- {{qn.option_4}} -->
        </div>

        <div class="opt">
          <input
            placeholder="choose correct answer"
            name="correctAns{{i}}"
            [(ngModel)]="qn.correctAnswer"
          />
          <!-- {{qn.correctAnswer}} -->
        </div>
      </div>

      <div>
        <label>DeleteStatus:</label>
        <input class="in" name="deleteStatus{{i}}" [ngModel]="qn.deleteStatus" />
      </div>
    </div>
  </div>
  <div>
    <button class="sub" (click)="newQn()">Add New</button>
  </div>
  <div class="update">
    <button class="newButton" (click)="onPost()">Post</button>
  </div>
</div>

